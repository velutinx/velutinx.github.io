<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>VELUTINX â€” Contact</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body>

  <!-- Fixed controls -->
  <div class="lang-swipe" id="langSwipe"></div>
  <div class="lang-toggle" id="langToggle">ðŸ‡¯ðŸ‡µ</div>
  <div class="theme-toggle" id="themeToggle">
    <div class="theme-knob"></div>
  </div>

  <!-- Page wrapper -->
  <div id="page">

    <!-- Navigation -->
    <div id="navContainer"></div>

    <div class="divider"></div>

    <!-- Contact form & social links -->
    <section class="contact-wrap">
      <div class="contact-left">
        <h2 id="contactTitle">CONTACT</h2>
        <p id="contactDesc">Use this form if you'd like to contact me via email!</p>

        <form id="contactForm">
          <input type="hidden" name="_subject" value="New Contact from Website">
          <input type="hidden" name="_replyto" value="email">

          <div class="form-group">
            <label id="labelName">NAME</label>
            <input type="text" id="name" name="name" placeholder="Name">
          </div>
          <div class="form-group">
            <label id="labelEmail">EMAIL</label>
            <input type="email" id="email" name="email" placeholder="Email">
          </div>
          <div class="form-group">
            <label id="labelMessage">MESSAGE</label>
            <textarea id="message" name="message" placeholder="Message"></textarea>
          </div>
          <div class="send-row">
            <button class="send-btn" id="sendBtn" type="submit">SEND</button>
          </div>
        </form>
      </div>

      <div class="contact-right" id="socialArea">
        <a class="social-btn" href="https://x.com/VelutinxSFW" target="_blank">
          <img src="/images/LogoTwitter.png" alt="Twitter"> Twitter
        </a>
        <a class="social-btn" href="https://bsky.app/profile/velutinxx.bsky.social" target="_blank">
          <img src="/images/LogoBluesky.png" alt="Bluesky"> Bluesky
        </a>
        <a class="social-btn" href="https://www.instagram.com/velutinxx/" target="_blank">
          <img src="/images/LogoInstagram.png" alt="Instagram"> Instagram
        </a>
        <a class="social-btn" href="https://www.pixiv.net/en/users/117116845" target="_blank">
          <img src="/images/LogoPixiv.png" alt="Pixiv"> Pixiv
        </a>
        <a class="social-btn" href="https://ko-fi.com/velutinx/tiers" target="_blank">
          <img src="/images/LogoKoFi.png" alt="Ko-fi"> Ko-fi
        </a>
        <a class="social-btn" href="https://subscribestar.adult/velutinx" target="_blank">
          <img src="/images/LogoSubscribeStar.png" alt="SubscribeStar"> SubscribeStar
        </a>
      </div>
    </section>

    <div class="divider"></div>

  </div>

  <!-- Shared navigation loader -->
  <script src="/assets/js/navigation.js"></script>

  <!-- All shared functionality inline -->
  <script>
    // Language toggle with flags
    let isJapanese = false;
    langToggle.onclick = () => {
      langSwipe.classList.remove("active");
      void langSwipe.offsetWidth;
      langSwipe.classList.add("active");

      setTimeout(() => {
        isJapanese = !isJapanese;

        document.querySelectorAll(".blob-text").forEach(t => {
          t.textContent = isJapanese ? t.dataset.jp : t.dataset.en;
        });

        langToggle.textContent = isJapanese ? "ðŸ‡ºðŸ‡¸" : "ðŸ‡¯ðŸ‡µ";

        // Translate contact form
        document.getElementById("contactTitle").textContent = isJapanese ? "ãŠå•ã„åˆã‚ã›" : "CONTACT";
        document.getElementById("contactDesc").textContent = isJapanese 
          ? "ãƒ¡ãƒ¼ãƒ«ã§é€£çµ¡ã—ãŸã„å ´åˆã¯ã“ã¡ã‚‰ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚" 
          : "Use this form if you'd like to contact me via email!";

        document.getElementById("labelName").textContent = isJapanese ? "ãŠåå‰" : "NAME";
        document.getElementById("labelEmail").textContent = isJapanese ? "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" : "EMAIL";
        document.getElementById("labelMessage").textContent = isJapanese ? "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" : "MESSAGE";
        document.getElementById("name").placeholder = isJapanese ? "ãŠåå‰" : "Name";
        document.getElementById("email").placeholder = isJapanese ? "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" : "Email";
        document.getElementById("message").placeholder = isJapanese ? "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" : "Message";
        document.getElementById("sendBtn").textContent = isJapanese ? "é€ä¿¡" : "SEND";
      }, 180);
    };

    // Theme toggle
    themeToggle.onclick = () => document.body.classList.toggle("dark");

    // Cursor sparkles
    let lastStarTime = 0;
    document.addEventListener("mousemove", (e) => {
      const now = Date.now();
      if (now - lastStarTime < 45) return;
      lastStarTime = now;

      const star = document.createElement("div");
      star.className = "star";
      star.textContent = "âœ¦";
      star.style.setProperty("--drift", Math.random());
      star.style.left = e.clientX + "px";
      star.style.top = e.clientY + "px";

      document.body.appendChild(star);
      setTimeout(() => star.remove(), 2000);
    });

    // Social area falling stars
    const socialArea = document.getElementById("socialArea");
    setInterval(() => {
      const star = document.createElement("div");
      star.className = "social-star";
      star.textContent = "âœ¦";
      star.style.left = Math.random() * socialArea.clientWidth + "px";
      star.style.top = "0px";
      socialArea.appendChild(star);
      setTimeout(() => star.remove(), 6000);
    }, 700);

    // Contact form submission + validation + Formspree
    document.getElementById("contactForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      // Define inputs
      const name = document.getElementById("name");
      const email = document.getElementById("email");
      const message = document.getElementById("message");

      // Reset previous errors
      [name, email, message].forEach(input => {
        input.style.borderColor = '';
        input.style.animation = 'none';
      });

      let hasError = false;

      if (!name.value.trim()) {
        name.style.borderColor = '#b33';
        name.style.animation = 'shake 0.35s';
        hasError = true;
      }
      if (!email.value.trim() || !email.value.includes("@")) {
        email.style.borderColor = '#b33';
        email.style.animation = 'shake 0.35s';
        hasError = true;
      }
      if (!message.value.trim()) {
        message.style.borderColor = '#b33';
        message.style.animation = 'shake 0.35s';
        hasError = true;
      }

      if (hasError) {
        const errorText = isJapanese ? "ã™ã¹ã¦ã®é …ç›®ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ â™¡" : "Please fill out all fields correctly â™¡";
        showPopup(errorText);
        return;
      }

      const successText = isJapanese ? "é€ä¿¡ã•ã‚Œã¾ã—ãŸï¼è¿‘æ—¥ä¸­ã«ã”é€£çµ¡ã—ã¾ã™ â™¡â™¡" : "Message sent successfully! You will hear back soon! â™¡â™¡";

      // Optimistic success popup
      showPopup(successText);

      // Prepare form data
      const formData = new FormData(this);

      try {
        const response = await fetch(this.action, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });

        if (response.ok) {
          console.log("Formspree success");
          this.reset();
        } else {
          const errorData = await response.json();
          console.error("Formspree error:", errorData);
          showPopup(isJapanese ? "é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ â™¡" : "Failed to send. Please try again â™¡");
        }
      } catch (err) {
        console.error("Fetch error:", err);
        showPopup(isJapanese ? "é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ â™¡" : "Failed to send. Please try again â™¡");
      }
    });

    // Popup function (red + bold + fade in/out after 5s)
    function showPopup(text) {
      const popup = document.createElement("div");
      popup.textContent = text;
      popup.style.position = "fixed";
      popup.style.top = "20px";
      popup.style.right = "20px";
      popup.style.background = "#eeeae0";
      popup.style.border = "3px solid #aa9e76";
      popup.style.padding = "14px 18px";
      popup.style.borderRadius = "10px";
      popup.style.fontSize = "13px";
      popup.style.letterSpacing = "1px";
      popup.style.fontWeight = "700";
      popup.style.color = "#b33"; // red text
      popup.style.boxShadow = "6px 6px 0 rgba(0,0,0,0.4)";
      popup.style.zIndex = "99999";
      popup.style.opacity = "0";
      popup.style.transition = "opacity 0.5s ease";

      document.body.appendChild(popup);

      // Fade in
      setTimeout(() => popup.style.opacity = "1", 10);

      // Fade out after 5 seconds
      setTimeout(() => {
        popup.style.opacity = "0";
        setTimeout(() => popup.remove(), 500);
      }, 5000);
    }

    // Send button shake on click
    document.getElementById("sendBtn").addEventListener("click", () => {
      const btn = document.getElementById("sendBtn");
      btn.style.animation = "none";
      void btn.offsetWidth; // reflow
      btn.style.animation = "shake 0.35s";
    });
  </script>

  <!-- Shared tab title animation -->
  <script src="/assets/js/tab-title-animation.js"></script>

</body>
</html>
