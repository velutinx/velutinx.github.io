<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>VELUTINX — Artwork</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body>

  <!-- Fixed controls -->
  <div class="lang-swipe" id="langSwipe"></div>
  <div class="lang-toggle" id="langToggle">日本語</div>
  <div class="theme-toggle" id="themeToggle">
    <div class="theme-knob"></div>
  </div>

  <!-- Page wrapper -->
  <div id="page">

    <!-- Navigation -->
    <div id="navContainer"></div>

    <div class="divider"></div>

    <!-- Artwork content -->
    <section class="artwork-wrap">
      <div class="artwork-intro" id="artworkIntro">
        Hello! These are just a few small samples of my artwork — I share a lot more on my free Discord! — Temporal Images
      </div>
      <div class="gallery" id="gallery"></div>
    </section>

    <div class="divider"></div>

  </div>

  <!-- Zoom overlay -->
  <div class="zoom-overlay" id="zoomOverlay"></div>

  <!-- Shared scripts -->
  <script src="/assets/js/navigation.js"></script>
  <script src="/assets/js/language-toggle.js"></script>
  <script src="/assets/js/theme-toggle.js"></script>
  <script src="/assets/js/cursor-sparkles.js"></script>
  <script src="/assets/js/tab-title-animation.js"></script>

  <!-- Page-specific: gallery + zoom + full-screen sparkles -->
  <script>
    // Gallery loading (from GitHub)
    const MAX_IMAGES = 45;
    const BASE = "/images/artwork/";

    const gallery = document.getElementById("gallery");

    for (let i = 1; i <= MAX_IMAGES; i++) {
      const img = document.createElement("img");
      img.src = BASE + i + ".jpg";
      img.alt = `Artwork sample ${i}`;
      img.onerror = () => img.remove();
      img.loading = "lazy";
      gallery.appendChild(img);
    }

    // Zoom functionality
    let activeClone = null;
    let originRect = null;

    document.addEventListener("click", (e) => {
      const img = e.target.closest(".gallery img");
      if (!img) return;

      originRect = img.getBoundingClientRect();
      const scrollY = window.scrollY;

      const clone = img.cloneNode();
      clone.className = "zoom-image";

      clone.style.top = originRect.top + scrollY + "px";
      clone.style.left = originRect.left + "px";
      clone.style.width = originRect.width + "px";
      clone.style.height = originRect.height + "px";

      document.body.appendChild(clone);
      activeClone = clone;

      clone.getBoundingClientRect(); // reflow
      document.getElementById("zoomOverlay").classList.add("active");
      document.body.classList.add("zoom-active");

      requestAnimationFrame(() => {
        const vw = window.innerWidth * 0.9;
        const vh = window.innerHeight * 0.9;
        const imgRatio = originRect.width / originRect.height;
        const viewRatio = vw / vh;

        let w, h;
        if (imgRatio > viewRatio) {
          w = vw;
          h = vw / imgRatio;
        } else {
          h = vh;
          w = vh * imgRatio;
        }

        clone.style.left = (window.innerWidth - w) / 2 + "px";
        clone.style.top = (window.innerHeight - h) / 2 + scrollY + "px";
        clone.style.width = w + "px";
        clone.style.height = h + "px";
      });
    });

    document.getElementById("zoomOverlay").onclick = () => {
      if (!activeClone) return;

      const scrollY = window.scrollY;
      activeClone.style.left = originRect.left + "px";
      activeClone.style.top = originRect.top + scrollY + "px";
      activeClone.style.width = originRect.width + "px";
      activeClone.style.height = originRect.height + "px";

      document.getElementById("zoomOverlay").classList.remove("active");
      document.body.classList.remove("zoom-active");

      setTimeout(() => {
        activeClone.remove();
        activeClone = null;
        originRect = null;
      }, 230);
    };

    // Full-screen falling sparkles
    setInterval(() => {
      const star = document.createElement("div");
      star.className = "falling-star";
      star.textContent = "✦";
      star.style.left = Math.random() * 100 + "vw";
      star.style.setProperty("--drift", Math.random());
      document.body.appendChild(star);
      setTimeout(() => star.remove(), 6000);
    }, 700);

    // Page-specific intro translation
    const EN_INTRO = "Hello! These are just a few small samples of my artwork — I share a lot more on my free Discord! — Temporal Images";
    const JP_INTRO = "こちらは作品サンプルの一部です。無料Discordではさらに多く公開しています！ 一時的な画像";

    document.addEventListener("languagechange", (e) => {
      const isJapanese = e.detail.isJapanese;
      document.getElementById("artworkIntro").textContent = isJapanese ? JP_INTRO : EN_INTRO;
    });
  </script>

</body>
</html>
