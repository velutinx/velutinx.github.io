<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>VELUTINX</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body>

  <div class="lang-swipe" id="langSwipe"></div>
  <div class="lang-toggle" id="langToggle">ðŸ‡¯ðŸ‡µ</div>
  <div class="theme-toggle" id="themeToggle"><div class="theme-knob"></div></div>

  <div id="page">
    <div id="navContainer"></div>
    <div class="divider"></div>

    <section class="hero">
      <div class="hero-image" id="heroImage">
        <img src="/images/Main.jpg" alt="Velutinx">
      </div>

      <div class="hero-text">
        <div class="hero-name">VELUTINX</div>
        <div class="hero-sub" id="heroSub">â™¡ Freelance Illustrator â™¡</div>
        <div class="hero-sub">ðŸ‡ºðŸ‡¸ / ðŸ‡¯ðŸ‡µ / ðŸ‡ªðŸ‡¸ = OK!</div>
        <div class="divider"></div>

        <a class="discord-link" href="https://discord.gg/6sHSVMEE" target="_blank">
          <img src="/images/LogoDiscord.png" alt="Discord">
        </a>
      </div>
    </section>

    <div class="divider"></div>
  </div>

  <!-- Shared navigation loader -->
  <script src="/assets/js/navigation.js"></script>

  <!-- All other functionality inline with localStorage persistence + robust blob memory -->
  <script>
    // Load saved preferences on page load
    const savedLang = localStorage.getItem("language");
    const savedDark = localStorage.getItem("darkMode") === "true";

    let isJapanese = savedLang === "jp";

    // Function to translate blobs (robust â€” polls if not ready)
    function translateBlobs(isJp) {
      const blobs = document.querySelectorAll(".blob-text");
      if (blobs.length === 0) {
        // Blobs not loaded yet â€” try again
        setTimeout(() => translateBlobs(isJp), 100);
        return;
      }
      blobs.forEach(t => {
        t.textContent = isJp ? t.dataset.jp : t.dataset.en;
      });
    }

    // Apply saved language on load
    translateBlobs(isJapanese);

    // Page-specific (hero sub)
    document.getElementById("heroSub").textContent = isJapanese
      ? "â™¡ ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã‚¤ãƒ©ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ â™¡"
      : "â™¡ Freelance Illustrator â™¡";

    document.getElementById("langToggle").textContent = isJapanese ? "ðŸ‡ºðŸ‡¸" : "ðŸ‡¯ðŸ‡µ";

    // Apply saved dark mode on load
    if (savedDark) {
      document.body.classList.add("dark");
    }

    // Language toggle with flags + save preference + update blobs
    langToggle.onclick = () => {
      langSwipe.classList.remove("active");
      void langSwipe.offsetWidth;
      langSwipe.classList.add("active");

      setTimeout(() => {
        isJapanese = !isJapanese;

        translateBlobs(isJapanese);

        document.getElementById("heroSub").textContent = isJapanese
          ? "â™¡ ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã‚¤ãƒ©ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ â™¡"
          : "â™¡ Freelance Illustrator â™¡";

        langToggle.textContent = isJapanese ? "ðŸ‡ºðŸ‡¸" : "ðŸ‡¯ðŸ‡µ";

        // Save language preference
        localStorage.setItem("language", isJapanese ? "jp" : "en");
      }, 180);
    };

    // Theme toggle + save preference
    themeToggle.onclick = () => {
      document.body.classList.toggle("dark");
      localStorage.setItem("darkMode", document.body.classList.contains("dark"));
    };

    // Cursor sparkles
    let lastStarTime = 0;
    document.addEventListener("mousemove", (e) => {
      const now = Date.now();
      if (now - lastStarTime < 45) return;
      lastStarTime = now;

      const star = document.createElement("div");
      star.className = "star";
      star.textContent = "âœ¦";
      star.style.setProperty("--drift", Math.random());
      star.style.left = e.clientX + "px";
      star.style.top = e.clientY + "px";

      document.body.appendChild(star);
      setTimeout(() => star.remove(), 2000);
    });

    // Hero falling stars
    setInterval(() => {
      const star = document.createElement("div");
      star.className = "social-star";
      star.textContent = "âœ¦";
      star.style.left = Math.random() * heroImage.clientWidth + "px";
      star.style.top = "0px";
      heroImage.appendChild(star);
      setTimeout(() => star.remove(), 6000);
    }, 700);
  </script>

  <!-- Shared tab title animation -->
  <script src="/assets/js/tab-title-animation.js"></script>

</body>
</html>
